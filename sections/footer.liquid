{{ 'section-footer.css' | asset_url | stylesheet_tag }}
{{ 'component-list-menu.css' | asset_url | stylesheet_tag }}
{{ 'component-list-payment.css' | asset_url | stylesheet_tag }}
{{ 'component-list-social.css' | asset_url | stylesheet_tag }}

{{ 'component-newsletter.css' | asset_url | stylesheet_tag }}
{{ 'newsletter-section.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top_mb }}px;
    padding-bottom: {{ section.settings.padding_bottom_mb }}px;
  }
  
  .footer__content-bottom * {
    font-size: {{ section.settings.bottom_size }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<footer class="footer gradient section-{{ section.id }}-padding color-{{ section.settings.color_scheme }}">
  {%- liquid
    assign has_social_icons = true
    if settings.social_facebook_link == blank and settings.social_instagram_link == blank and settings.social_youtube_link == blank and settings.social_tiktok_link == blank and settings.social_twitter_link == blank and settings.social_pinterest_link == blank and settings.social_snapchat_link == blank and settings.social_tumblr_link == blank and settings.social_vimeo_link == blank
      assign has_social_icons = false
    endif
  -%}
  {%- if section.blocks.size > 0 or has_social_icons == true -%}
    {%- unless only_empty_brand -%}
      <div class="footer__content-top page-width">
        {%- if section.blocks.size > 0 -%}
          {%- liquid
            if section.blocks.size == 9
              assign footer_grid_class = 'grid--3-col-tablet'
            elsif section.blocks.size > 6
              assign footer_grid_class = 'grid--4-col-desktop'
            elsif section.blocks.size > 4
              assign footer_grid_class = 'grid--3-col-tablet'
            endif
          -%}
          <div
            class="footer__blocks-wrapper grid grid--1-col grid--2-col grid--4-col-tablet {{ footer_grid_class }} {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
            {% if settings.animations_reveal_on_scroll %}
              data-cascade
            {% endif %}
          >
            {%- for block in section.blocks -%}
              <style>
                .footer-block-{{ block.id }} {
                  --block-width: {{ block.settings.width }}%;
                }
              </style>
              <div
                class="footer-block-{{ block.id }} footer-block grid__item footer-block__{{ block.type }}{% if block.type == 'link_list' %} footer-block--menu{% endif %}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                {{ block.shopify_attributes }}
                {% if settings.animations_reveal_on_scroll %}
                  data-cascade
                {% endif %}
                style="
                                  {% if settings.animations_reveal_on_scroll %}--animation-order: {{ forloop.index }};{% endif %}
                "
              >
              {%- case block.type -%}
                {%- when 'text' or 'link_list'-%}
                  {%- if block.type == 'text' -%}
                    {%- if block.settings.image != blank -%}
                      {%- assign brand_image_height = block.settings.logo_width
                        | divided_by: block.settings.image.aspect_ratio
                      -%}
                      <div
                        class="footer-block__image-wrapper"
                        style="max-width: min(100%, {{ block.settings.logo_width }}px); --margin: {{block.settings.logo_margin}}px; --margin-mb: {{block.settings.logo_margin_mb}}px"
                      >
                        <a href="{{ routes.root_url }}" aria-label="Footer logo">
                          {{
                            block.settings.image
                            | image_url: width: 1100
                            | image_tag:
                              loading: 'lazy',
                              widths: '50, 100, 150, 200, 300, 400, 550, 800, 1100',
                              height: brand_image_height,
                              width: block.settings.logo_width
                          }}
                        </a>
                      </div>
                    {%- endif -%}
                    {%- if block.settings.enable_info -%}
                        <div class="footer-block__info-wrapper">
                          {%- if block.settings.heading_Info != blank -%}
                            <h2 class="footer-block__heading inline-richtext">{{- block.settings.heading_Info -}}</h2>
                          {%- endif -%}
                          {%- for info in (1..3) -%}
                            {%- assign info_text = forloop.index | prepend: 'info_' -%}
                            {%- assign fontSize = forloop.index | prepend: 'size_info_' -%}
                            {%- assign margin = forloop.index | prepend: 'margin_info_' -%}
                            {%- assign FontSizeMobile = forloop.index | prepend: 'size_info_mb_' -%}
                            {%- assign margin_mb = forloop.index | prepend: 'margin_mb_info_' -%}
                            {%- assign text = block.settings[info_text] -%}
                            {%- assign fontSizeDesk = block.settings[fontSize] -%}
                            {%- assign marginDesk = block.settings[margin] -%}
                            {%- assign fontSizeMb = block.settings[FontSizeMobile] -%}
                            {%- assign marginMb = block.settings[margin_mb] -%}
                            {%- if text != blank -%}
                              <div class="footer-block__info-item info-item__{{forloop.index}}"
                                style="--font-size:{{fontSizeDesk}}px; --font-size-mb:{{fontSizeMb}}px; --margin-bottom:{{marginDesk}}px; --margin-bottom-mb:{{marginMb}}px"
                              >
                                {%- if text != blank -%}
                                  <span class="text">{{ text }}</span>
                                {%- endif -%}
                              </div>
                            {%- endif -%}
                          {%- endfor -%}
                          {%- if block.settings.show_newsletter_form -%}
                            {%- if block.settings.newsletter_title != blank -%}
                            <h2 class="footer-block__newsletter-title"
                              style="--font-size:{{block.settings.newsletter_title_font_size}}px; --font-size-mb:{{block.settings.newsletter_title_font_size_mb}}px; --margin-bottom:{{block.settings.newsletter_title_margin}}px; --margin-bottom-mb:{{block.settings.newsletter_title_margin_mb}}px;"
                            >
                              {{ block.settings.newsletter_title}}
                            </h2>
                            {%- endif -%}
                            {% form 'customer', class: 'newsletter-form' %}
                              <input type="hidden" name="contact[tags]" value="newsletter">
                              <div
                                class="newsletter-form__field-wrapper{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                                {% if settings.animations_reveal_on_scroll %}
                                  data-cascade
                                  style="--animation-order: {{ forloop.index }};"
                                {% endif %}
                              >
                                <div class="field">
                                  <input
                                    id="NewsletterForm--{{ section.id }}"
                                    type="email"
                                    name="contact[email]"
                                    class="field__input"
                                    value="{{ form.email }}"
                                    aria-required="true"
                                    autocorrect="off"
                                    autocapitalize="off"
                                    autocomplete="email"
                                    {% if form.errors %}
                                      autofocus
                                      aria-invalid="true"
                                      aria-describedby="Newsletter-error--{{ section.id }}"
                                    {% elsif form.posted_successfully? %}
                                      aria-describedby="Newsletter-success--{{ section.id }}"
                                    {% endif %}
                                    placeholder="{{ 'newsletter.label' | t }}"
                                    required
                                  >
                                  <label class="field__label" for="NewsletterForm--{{ section.id }}" hidden>
                                    {{ 'newsletter.label' | t }}
                                  </label>
                                  <button
                                    type="submit"
                                    class="button"
                                    name="commit"
                                    id="Subscribe"
                                    aria-label="{{ 'newsletter.button_label' | t }}"
                                  >
                                    {{ 'newsletter.button_label' | t }}
                                  </button>
                                </div>
                                {%- if form.errors -%}
                                  <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
                                    {%- render 'icon-error' -%}
                                    {{- form.errors.translated_fields.email | capitalize }}
                                    {{ form.errors.messages.email -}}
                                  </small>
                                {%- endif -%}
                              </div>
                              {%- if form.posted_successfully? -%}
                                <h3
                                  class="newsletter-form__message newsletter-form__message--success form__message"
                                  id="Newsletter-success--{{ section.id }}"
                                  tabindex="-1"
                                  autofocus
                                >
                                  {% render 'icon-success' -%}
                                  {{- 'newsletter.success' | t }}
                                </h3>
                              {%- endif -%}
                            {% endform %}
                          {%- endif -%}
                          {%- if block.settings.show_social and has_social_icons -%}
                            <div class="block--social">
                              {%- render 'social-icons', class: 'footer__list-social' -%}
                            </div>
                          {%- endif -%}
                        </div>
                    {%- endif -%}
                  {%- endif -%}
                  {%- if block.settings.heading != blank -%}
                    <h2 class="footer-block__heading inline-richtext {% if block.type == 'link_list' %}accordion_footer{% endif %}">
                      {{- block.settings.heading -}}
                    </h2>
                  {%- endif -%}
                  {%- when '@app' -%}
                    {% render block %}
                  {%- when 'text' -%}
                    <div class="footer-block__details-content rte">
                      {{ block.settings.subtext }}
                    </div>
                  {%- when 'link_list' -%}
                    {%- if block.settings.menu != blank -%}
                      <ul class="footer-block__details-content list-unstyled">
                        {%- for link in block.settings.menu.links -%}
                          <li>
                            <a
                              href="{{ link.url }}"
                              class="link link--text list-menu__item list-menu__item--link"
                            >
                              {{ link.title }}
                            </a>
                          </li>
                        {%- endfor -%}
                      </ul>
                    {%- endif -%}
                {%- endcase -%}
                
              </div>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    {%- endunless -%}
  {%- endif -%}
  <div
    class="footer__content-bottom color-{{ section.settings.color_scheme }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
    {% if settings.animations_reveal_on_scroll %}
      data-cascade
    {% endif %}
  >
    <div class="footer__content-bottom-wrapper page-width">
      {%- if section.settings.copyright_enable and section.settings.content_copyright != blank -%}
        <div class="footer__copyright">
          {{ section.settings.content_copyright }}
        </div>
      {%- endif -%}
      
      <div class="footer__column footer__payment">
        {%- if section.settings.payment_enable %}
          <div class="footer__payment">
            {%- if section.settings.heading_payment != blank-%}
              <span class="title">{{section.settings.heading_payment}}</span>
            {%- endif -%}
            <span class="visually-hidden">{{ 'sections.footer.payment' | t }}</span>
            <ul class="list list-payment" role="list">
              {%- if settings.payment_type == 'default' -%}
                {%- for type in shop.enabled_payment_types -%}
                  <li class="list-payment__item">
                    {{ type | payment_type_svg_tag: class: 'icon icon--full-color' }}
                  </li>
                {%- endfor -%}
              {%- else -%}
                {% assign payment_string = 'visa,visa_electron,master,maestro,american_express,solo,amazon_payments,apple_pay,bitcoin,cirrus,dankort,diners_club,discover,paypal,dogecoin,dwolla,forbrugsforeningen,interac,jcb,litecoin,stripe,sage,wallet' %}
                {% assign methods = payment_string | split: ',' %}

                {%- for method in methods -%}
                  {%- assign method_icon = method | prepend: 'icon_' -%}
                  {%- assign icon = settings[method_icon] -%}
                  {%- if icon != blank -%}
                    <li class="list-payment__item">
                      <img
                        loading="lazy"
                        src="{{ icon | img_url: '36x36' }}"
                        srcset="{{ icon | img_url: '36x36' }}"
                        alt="{{ method }}",
                        height="100%",
                        width="100%"
                      >
                    </li>
                  {%- endif -%}
                {%- endfor -%}
              {%- endif -%}
            </ul>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</footer>
<script>
  var acc = document.getElementsByClassName('accordion_footer');
  var i;

  for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener('click', function () {
      this.classList.toggle('active');
    });
  }
</script>
{% schema %}
{
  "name": "t:sections.footer.name",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "link_list",
      "name": "t:sections.footer.blocks.link_list.name",
      "settings": [
        {
          "type": "range",
          "id": "width",
          "label": "Width",
          "min": 5,
          "max": 100,
          "step": 1,
          "unit": "%",
          "default": 20
        },
        {
          "type": "inline_richtext",
          "id": "heading",
          "default": "Quick links",
          "label": "t:sections.footer.blocks.link_list.settings.heading.label"
        },
        {
          "type": "link_list",
          "id": "menu",
          "default": "footer",
          "label": "t:sections.footer.blocks.link_list.settings.menu.label",
          "info": "t:sections.footer.blocks.link_list.settings.menu.info"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.footer.blocks.text.name",
      "limit": 3,
      "settings": [
        {
          "type": "range",
          "id": "width",
          "label": "Width",
          "min": 5,
          "max": 100,
          "step": 1,
          "unit": "%",
          "default": 20
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Logo"
        },
        {
          "type": "range",
          "id": "logo_width",
          "label": "Logo width",
          "min": 20,
          "max": 200,
          "step": 5,
          "default": 115
        },
        {
          "type": "range",
          "id": "logo_margin",
          "label": "Margin bottom",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 24
        },
        {
          "type": "range",
          "id": "logo_margin_mb",
          "label": "Margin bottom mobile",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 24
        },
        {
          "type": "header",
          "content": "Info company"
        },
        {
          "type": "inline_richtext",
          "id": "heading_Info",
          "default": "Contact Us ",
          "label": "Heading"
        },
        {
          "type": "checkbox",
          "id": "enable_info",
          "label": "Enable?",
          "default": true
        },
        {
          "type": "richtext",
          "id": "info_1",
          "label": "Info 1"
        },
        {
          "type": "range",
          "id": "size_info_1",
          "label": "Font size info 1",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 14
        },
        {
          "type": "range",
          "id": "margin_info_1",
          "label": "Info 1 margin bottom",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "range",
          "id": "size_info_mb_1",
          "label": "Font size info 1 mobile",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 14
        },
        {
          "type": "range",
          "id": "margin_mb_info_1",
          "label": "Info 1 margin bottom mobile",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "richtext",
          "id": "info_2",
          "label": "Info 2"
        },
        {
          "type": "range",
          "id": "size_info_2",
          "label": "Font size info 2",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 14
        },
        {
          "type": "range",
          "id": "margin_info_2",
          "label": "Info 2 margin bottom",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "range",
          "id": "size_info_mb_2",
          "label": "Font size info 2 mobile",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 14
        },
        {
          "type": "range",
          "id": "margin_mb_info_2",
          "label": "Info 2 margin bottom mobile",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "richtext",
          "id": "info_3",
          "label": "Info 3"
        },
        {
          "type": "range",
          "id": "size_info_3",
          "label": "Font size info 3",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 14
        },
        {
          "type": "range",
          "id": "margin_info_3",
          "label": "Info 3 margin bottom",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "range",
          "id": "size_info_mb_3",
          "label": "Font size info 3 mobile",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 14
        },
        {
          "type": "range",
          "id": "margin_mb_info_3",
          "label": "Info 3 margin bottom mobile",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "header",
          "content": "Newsletter form"
        },
        {
          "type": "checkbox",
          "id": "show_newsletter_form",
          "default": false,
          "label": "Enable newsletter form"
        },
        {
          "type": "textarea",
          "id": "newsletter_title",
          "label": "Newsletter Title"
        },
        {
          "type": "range",
          "id": "newsletter_title_font_size",
          "label": "Font size",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 24
        },
        {
          "type": "range",
          "id": "newsletter_title_margin",
          "label": "margin bottom",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "range",
          "id": "newsletter_title_font_size_mb",
          "label": "Font size mobile",
          "min": 10,
          "max": 100,
          "step": 1,
          "default": 14
        },
        {
          "type": "range",
          "id": "newsletter_title_margin_mb",
          "label": "Margin bottom mobile",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        {
          "type": "header",
          "content": "Social"
        },
        {
          "type": "checkbox",
          "id": "show_social",
          "default": true,
          "label": "Enable social"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "background-1"
    },
    {
      "type": "header",
      "content": "Copyright"
    },
    {
      "type": "checkbox",
      "id": "copyright_enable",
      "default": true,
      "label": "Enable copyright"
    },
    {
      "type": "richtext",
      "id": "content_copyright",
      "label": "Content"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.header__7.content"
    },
    {
      "type": "checkbox",
      "id": "payment_enable",
      "default": true,
      "label": "t:sections.footer.settings.payment_enable.label"
    },
    {
      "type": "inline_richtext",
      "id": "heading_payment",
      "default": "We Using Safe Payment For",
      "label": "Heading payment"
    },
    {
      "type": "range",
      "id": "bottom_size",
      "label": "Text font size",
      "min": 10,
      "max": 100,
      "step": 1,
      "default": 14
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_top_mb",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding top on Mobile",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom_mb",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding bottom on Mobile",
      "default": 36
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "link_list"
      },
      {
        "type": "text"
      }
    ]
  }
}
{% endschema %}
